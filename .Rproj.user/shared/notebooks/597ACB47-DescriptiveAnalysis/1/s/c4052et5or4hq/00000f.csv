"0","dados <-  df"
"0","#Kaplan-Meier fit (marginal)"
"0","fit.km1 <- survfit2(Surv(tenure, status) ~ gender, dados)"
"0","fit.km2 <- survfit2(Surv(tenure, status) ~ PaymentMethod, dados)"
"0","fit.km3 <- survfit2(Surv(tenure, status) ~ Contract, dados)"
"0","fit.km4 <- survfit2(Surv(tenure, status) ~ SeniorCitizen, dados)"
"0","fit.km5 <- survfit2(Surv(tenure, status) ~ InternetService, dados)"
"0","fit.km6 <- survfit2(Surv(tenure, status) ~ StreamingTV, dados)"
"0","fit.km8 <- survfit2(Surv(tenure, status) ~ Dependents, dados)"
"0","fit.km9 <- survfit2(Surv(tenure, status) ~ PaperlessBilling, dados)"
"0","fit.km10<- survfit2(Surv(tenure, status) ~ DeviceProtection, dados)"
"0","fit.km11<- survfit2(Surv(tenure, status) ~ PhoneService, dados)"
"0","fit.km12<- survfit2(Surv(tenure, status) ~ TechSupport, dados)"
"0",""
"0","extrai_km <- function(fit_km) {"
"0","    ret <- tidy_survfit(fit_km, type = ""surv"") %>%"
"0","    select(.eval_time = time, .pred_survival = estimate, id = strata) %>%"
"0","      group_by(id) %>%"
"0","      mutate(haz = tx.emp(.eval_time, .pred_survival)) %>%  "
"0","      tidyr::nest(.pred = c(.eval_time, .pred_survival))"
"0","      return(ret)"
"0","}"
"0",""
"0","kms <- list(Gender=fit.km1, PaymentMethod=fit.km2, Contract=fit.km3, "
"0","            SeniorCitizen= fit.km4, InternetService= fit.km5, "
"0","            StreamingTV= fit.km6,Dependents=fit.km8, PaperlessBilling= fit.km9, DeviceProtection=fit.km10, PhoneService= fit.km11, TechSupport=fit.km12) "
"0","resultado= map(kms, extrai_km)"
